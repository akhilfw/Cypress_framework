name: Cypress tests for CI/CD
on: [push, workflow_dispatch]
jobs:
 cypress-run:
    runs-on: ubuntu-latest
    steps:
         - name: Checkout
           uses: actions/checkout@v3

         - name: Npm Updates
           run: npm install
           
         - name: Cypress run
           env:
             username: ${{ secrets.USERNAME }} 
             password: ${{ secrets.PASSWORD }} 
           uses: cypress-io/github-action@v6
           with:
             start: CYPRESS_USERNAME='$username' CYPRESS_PASSWORD='$password' npx cypress run --headless
             browser: chrome
               
